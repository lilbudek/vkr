\chapter{АППАРАТНАЯ ЧАСТЬ}
\section{Конструирование макета}
	По структурной схеме (рис. 2.7) создадим схему электрическую принципиальную. 
	
	\begin{figure}[H]
    \centering
    \includegraphics[width=1\textwidth]{../image/scheme-cropped.png}
    \caption{Схема электрическая принципиальная.}
	\end{figure}
	
	Просто так контроллер работать не сможет. Необходим внешний кварцевый резонатор для стабилизации частоты системного тактового генератора, а также функция сброса. Эти узлы уже реализованы на отладочной плате микроконтроллера. Питание схемы будет подаваться через разъём SWD.
	
	Для управления потребуется 5 кнопок
	\begin{enumerate}
		\item Уменьшить частоту.
		\item Увеличить частоту.
		\item Предыдущий сигнал.
		\item Следующий сигнал.
		\item Выбор шага.
	\end{enumerate}
	
	Выделим для кнопок выводы PB5 - PB9. Постоянно быть подключенными к напряжению или земле выводы не могут, т. к. не будет возможности подавать на них какой-либо информационный сигнал. На выводы могут наводиться произвольные потенциалы, что негативно влияет на работу схемы. Подобные потенциалы имитируют сигналы, которые не предусмотрены. Из-за них может нарушиться логика работы, поэтому их принято фиксировать~\cite{schemat}. 
	
	Для этого используют подтягивающие (Pull - up) или заземляющие (Pull - down) резисторы. Они создают цепь, которая обеспечивает подтяжку сигнала к напряжению питания или земле. Если резисторы имеют большие сопротивления, то сигналы относят к слабым. При подключении сильных информационных сигналов происходит преодоление слабых и функциональность схемы не нарушается~\cite{butres}.
	
	\begin{figure}[H]
    \centering
    \includegraphics[width=0.55\textwidth]{../image/res.png}
    \caption{Pull-up и Pull - down резисторы.}
	\end{figure}
	
	В схеме устройства будет использоваться подтяжка к земле для считывания высокого уровня сигнала, то есть будет использоваться прямая логика. Рассчитаем минимальное и максимальное сопротивление заземляющего резистора.
	\begin{gather}
	R_{min} = \dfrac{V_{0}}{I_{out}},
	\end{gather}
	
	где $V_{0}$ --- напряжение логического нуля,
	
	$I_{max}$ --- максимальный ток вывода.
	
	Согласно спецификации микроконтроллера напряжение логического нуля составляет 1,16 В, а максимальный протекающий ток через пин может быть 25 мА~\cite{f103}. 
	
\begin{center}
	$R_{min} = \dfrac{1,16}{25*10^{-3}} = 46,4$ Ом.
\end{center}

	Для расчета максимального сопротивления формула следующая:
	\begin{gather}
	R_{max} = \dfrac{t}{C_{I/O}},
	\end{gather}
	
	где $t$ --- время нарастания сигнала,
	
	$C_{b}$ --- ёмкость вывода.
	
	Ёмкость вывода составляет 5 пФ, время нарастания возьмём 1 микросекунду (стандартный сигнал 100 кГц).
	
\begin{center}
	$R_{max} = \dfrac{1*10^{-6}}{5*10^{-12}} = 200$ кОм.
\end{center}	

	Из расчётов можно сделать вывод, что номинал резистора расположен в следующих границах.
	
\begin{center}
	$46,4$ Ом$ < R < 200$ кОм.
\end{center}	

	Разброс довольно большой, но из практики известно, что подтягивающий резистор имеет номинал 1 - 10 кОм.
	


\section{Вывод из третьей главы}